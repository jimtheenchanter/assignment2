
#{extends 'main.html' /}
#{set title:'Dashboard' /}

#{if !isTrainer}
#{menu id:"dashboard"/}
#{/if}

#{if isTrainer}
#{trainermenu /}
#{/if}

<section class="ui raised segment">
  <header class="ui center aligned header">
    ${member.firstName} ${member.lastName}'s Assessment List
  </header>

  <table class="ui center aligned unstackable table">
    <thead>
    <h3 class="ui center aligned header">Current BMI Assessment</h3>
    #{if member.gender == "Male"}
      <th class="ui center aligned header">
          <i class="mars icon"></i> ${member.firstName}</th>
    #{/if}
    #{if gender == "Female"}
    <th class="ui center aligned header">
        <i class="venus icon"></i> ${member.firstName}</th>
    #{/if}
    #{extends 'main.html' /}
    #{set title:'Profile' /}

    #{menu id:"profile"/}

    <section class="ui center aligned middle aligned segment">
        <form class="ui stacked segment form" action="/update" method="POST">
            <h3 class="ui header">Update Profile Details</h3>
            <div class="two fields">
                <div class="field">
                    <label>First Name</label>
                    <input placeholder="${member.firstName}" type="text" name="firstName">
                </div>
                <div class="field">
                    <label>Last Name</label>
                    <input placeholder="${member.lastName}" type="text" name="lastName">
                </div>
            </div>
            <div class="field">
                <label>Email</label>
                <input placeholder="${member.email}" type="text" name="email">
            </div>

            <div class="two fields">
                <div class="field">
                    <label>Address</label>
                    <input placeholder="${member.address}" type="text" name="address" >
                </div>
                <div class="field">
                    <label>Gender</label>
                    <input placeholder="${member.gender}" type="text" name="gender">
                </div>
            </div>
            <div class="two fields">
                <div class="field">
                    <label>Height</label>
                    <input placeholder="${member.height}" type="number" min="1.0" max="3.0" step="0.01" name="height">
                </div>
                <div class="field">
                    <label>Start Weight</label>
                    <input placeholder="${member.startWeight}" type="number" min="35.00" max="250.00" name="startWeight">
                </div>
            </div>
            <div class="field">
                <label>Password must be correct to update profile details</label>
                <input type="password" name="password" required>
            </div>

            <button class="ui blue submit button">Submit</button>
        </form>
    </section>
    #{if isIdeal}
    <th class="ui center aligned header"><i class=" green thumbs up icon"></i>
        Ideal Weight Indicator
   </th>
    #{/if}

    #{if !isIdeal}
    <th class="ui center aligned header"><i class=" red thumbs down icon"></i>
        Ideal Weight Indicator
    </th>
    #{/if}

      <th class="ui center aligned header"><i class="heartbeat icon"></i> ${bmi}
      Current BMI</th>
      <th class="ui center aligned header"><i class="list icon"></i> ${bmiCategory} Body Category </th>
    </thead>

  </table>

    <table class="ui center aligned unstackable table">
        <thead>
        <h3 class="ui center aligned header">${member.firstName}'s starting stats</h3>
        <th class="ui center aligned header">Height: ${member.height} metres</th>
        <th class="ui center aligned header">StartWeight: ${member.startWeight}</th>
        </thead>

    </table>
#{if !isTrainer}
  <form class="ui form segment" action="/dashboard/addAssessment" method="POST">
    <div class="three fields">
    <div class="field">
      <label>Weight</label>
      <input placeholder="kg" type="text" name="weight" required>
    </div>
    <div class="field">
      <label>Chest</label>
      <input placeholder="cm" type="text" name="chest" required>
    </div>
    <div class="field">
      <label>Thigh</label>
      <input placeholder="cm" type="text" name="thigh" required>
    </div>
    </div>
    <div class="three fields">
    <div class="field">
      <label>UpperArm</label>
      <input placeholder="cm" type="text" name="upperArm" required>
    </div>
    <div class="field">
      <label>Waist</label>
      <input placeholder="cm" type="text" name="waist" required>
    </div>
    <div class="field">
      <label>Hip</label>
      <input placeholder="cm" type="text" name="hip" required>
    </div>
    </div>

    <button class="ui blue submit button">Add Assessment</button>
  </form>
#{/if}

  <table class="ui center aligned unstackable table">
    <thead>
    <h3 class="ui center aligned header">Assessments</h3>
      <th>Weight</th>
      <th>Chest</th>
      <th>Thigh</th>
      <th>UpperArm</th>
      <th>Waist</th>
      <th>Hip</th>
    <th>Trend</th>
      <th>Comment</th>
    #{if !isTrainer}
    <th>Delete Assessment</th>
    #{/if}
    </thead>
    <tbody>
      #{list items:assessments, as:'assessment'}
      <tr>
        <td> ${assessment.weight}</td>
        <td> ${assessment.chest}</td>
        <td> ${assessment.thigh}</td>
        <td> ${assessment.upperArm}</td>
        <td> ${assessment.waist}</td>
        <td> ${assessment.hip} </td>
        #{if assessment.higher}
        <td> <i class="ui red angle double up icon"></i></td>
        #{/if}
        #{if !assessment.higher}
        <td> <i class="ui green angle double down icon"></i></td>
        #{/if}
        <td> ${assessment.comment} </td>
        #{if !isTrainer}
        <td> <a href="/dashboard/${member.id}/deleteAssessment/${assessment.id} " class="ui tiny red button"> Delete Assessment</a> </td>
        #{/if}
        #{if isTrainer}
      <tr>
        <td colspan="7">
        <form method="POST" action="/addComment/${assessment.id}">
          <div class="ui form">
          <div class="field">
          <textarea placeholder="Enter comment..." name="comment"></textarea>
          <input hidden name="memberId" value="${member.id}">
          <button class="ui blue button" type="submit">Update</button>
          </div>
          </div>
        </form>
        </td>
      </tr>
      #{/if}
      </tr>

      #{/list}
    </tbody>
  </table>

</section>

